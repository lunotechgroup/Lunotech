{% extends "base.html" %}
{% load static %}

{% block title %}
    {% if request.COOKIES.siteLang == 'fa' %}
        {{ post.title_fa }} - لونوتک
    {% else %}
        {{ post.title_en }} - Lunotech
    {% endif %}
{% endblock %}

{% block head_extra %}
  <link rel="stylesheet" href="{% static 'css/blog_detail.css' %}">
{% endblock %}

{% block content %}
<div class="blog-detail-page">
    
    <article class="blog-article">
        <header class="article-header">
            {% if post.category %}
            <span class="category-tag">
                <span class="lang-en">{{ post.category.name_en }}</span>
                <span class="lang-fa">{{ post.category.name_fa }}</span>
            </span>
            {% endif %}
            
            <h1 class="article-title">
                <span class="lang-en">{{ post.title_en }}</span>
                <span class="lang-fa">{{ post.title_fa }}</span>
            </h1>
            
            <div class="author-meta">
                <span class="author-name">{{ post.creator_name }}</span>
                <span class="meta-separator">•</span>
                <time datetime="{{ post.date|date:'Y-m-d' }}">{{ post.date|date:"F j, Y" }}</time>
            </div>
        </header>

        {% if post.image %}
        <figure class="hero-image" id="hero-image">
            <img src="{{ post.image.url }}" alt="{{ post.title_en }}">
        </figure>
        {% endif %}

        <section class="article-content">
            <div class="lang-en">
                {{ post.description_en|safe }}
            </div>
            
            <div class="lang-fa">
                {{ post.description_fa|safe }}
            </div>
        </section>
    </article>

    <aside class="social-share" id="social-share-bar">
        <div class="share-title">
            <span class="lang-en">SHARE</span>
            <span class="lang-fa">اشتراک گذاری</span>
        </div>
        
        <div class="share-icons-wrapper">
            <a href="https://www.linkedin.com/shareArticle?mini=true&url={{ request.build_absolute_uri }}" 
               target="_blank" rel="noopener noreferrer" class="share-icon" aria-label="Share on LinkedIn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/>
                    <rect x="2" y="9" width="4" height="12"/>
                    <circle cx="4" cy="4" r="2"/>
                </svg>
            </a>
            
            <a href="https://twitter.com/intent/tweet?url={{ request.build_absolute_uri }}&text={{ post.title_en }}" 
               target="_blank" rel="noopener noreferrer" class="share-icon" aria-label="Share on Twitter">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
                </svg>
            </a>
            
            <button id="copy-link-btn" class="share-icon" aria-label="Copy Link">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                </svg>
            </button>
        </div>
    </aside>

</div>
{% endblock %}

{% block body_extra %}
  <script src="{% static 'js/blog_detail.js' %}"></script>
{% endblock %}